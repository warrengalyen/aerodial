{% extends "_template.html" %}

{% set title = 'Events' %}

{% block content %}
<h2>Handling events</h2>
<p>You can use <code>on()</code> of specific property to detect its changes.</p>
<p>
  <code>'change'</code> event will be called continuously when the user controls a slider. If you want to detect a change just one time, use <code>'TODO'</code> event instead.
</p>

<pre><code class="js">var ss = Aerodial();
ss.add(target, 'someProperty', {min: 0, max: 100}).on(
  'change', function(value) {
    console.log(value);
  }
);
</code></pre>

<div id="eventExampleContainer" class="exampleContainer">
</div>

<div id="logWindow" class="log"></div>

<p>You can also detect all changes by <code>on()</code> of the root object.</p>

<pre><code class="js">var ss = Aerodial();
ss.add(target, 'someProperty', {min: 0, max: 100});
ss.on(
  'change', function(value) {
    console.log(value);
  }
);
</code></pre>

<div id="globalEventExampleContainer" class="exampleContainer">
</div>

TODO: Aerodial

TODO: Log
{% endblock %}

{% block script %}
function appendLog(eventName, value) {
const elem = document.getElementById('logWindow');
elem.innerHTML = [
eventName,
': ',
String(value),
'<br>'
].join('') + elem.innerHTML;
}

(function() {
appendLog('', ')');

var params = {
someProperty: 50
};
var ss = Aerodial({
container: document.getElementById('eventExampleContainer')
});
ss.add(params, 'someProperty', {
min: 0,
max: 100
}).on(
'change',
function(value) {
appendLog('change', value);
}
);
})();

(function() {
appendLog('', ')');

var params = {
foo: 50,
bar: 50
};
var ss = Aerodial({
container: document.getElementById('globalEventExampleContainer')
});
ss.add(params, 'foo', {min: 0, max: 100});
ss.add(params, 'bar', {min: 0, max: 100});
ss.on('change', function(value, prop) {
appendLog(
'change(' + prop.getLabel() + ')',
value
);
});
})();
{% endblock %}