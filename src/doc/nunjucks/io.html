{% extends "_template.html" %}

{% set title = 'Import/Export' %}

{% block content %}
<p>You can export all properties to JSON by <code>getJson()</code>.</p>

<div class="codeBlock">
    <div class="codeBlock_section">
		<pre><code class="js">var paneFrom = Aerodial();
// ...
var json = paneFrom.getJson();
console.log(json);</code></pre>
    </div>
    <div class="codeBlock_section codeBlock_section-example">
        <div class="twoColumnLayout">
            <div class="twoColumnLayout_leftColumn">
                <div id="exportExample" class="codeBlock_paneContainer"></div>
            </div>
            <div class="twoColumnLayout_rightColumn">
                <textarea id="exportArea" class="codeBlock_textBox" readOnly></textarea>
            </div>
        </div>
    </div>
</div>

<p>To import an exported JSON, pass it to <code>setJson()</code>.</p>

<div class="codeBlock">
    <div class="codeBlock_section">
		<pre><code class="js">var paneTo = Aerodial();
// ...
paneTo.setJson(json);</code></pre>
    </div>
    <div class="codeBlock_section codeBlock_section-example">
        <div class="twoColumnLayout">
            <div class="twoColumnLayout_leftColumn">
                <textarea id="importArea" class="codeBlock_textBox" readOnly></textarea>
            </div>
            <div class="twoColumnLayout_rightColumn">
                <div id="importExample" class="codeBlock_paneContainer"></div>
            </div>
        </div>
    </div>
</div>


<h2>Changing a key of JSON variable</h2>
<p>By default, property name will be used as a key of JSON object. You can change it by <code>id</code> option.</p>

<div class="codeBlock">
    <div class="codeBlock_section">
		<pre><code class="js">var pane = Aerodial();
pane.add(target1, 'speed', {
  id: 'target1_speed'
});
pane.add(target2, 'speed', {
  id: 'target2_speed'
});</code></pre>
    </div>
    <div class="codeBlock_section codeBlock_section-example">
        <div class="twoColumnLayout">
            <div class="twoColumnLayout_leftColumn">
                <div id="idExample" class="codeBlock_paneContainer"></div>
            </div>
            <div class="twoColumnLayout_rightColumn">
                <textarea id="idArea" class="codeBlock_textBox" readOnly></textarea>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block script %}
function prettifyJson(json) {
return JSON.stringify(json)
.replace(/\{/g, '{\n  ')
.replace(/,/g, ',\n  ')
.replace(/\}/g, '\n}');
}

function showJson(json) {
var jsonString = prettifyJson(json);
document.getElementById('exportArea').textContent = jsonString;
document.getElementById('importArea').textContent = jsonString;
}

(function() {
var params = {
color: '#f80',
size: 10,
speed: 1.0
};
var pane = Aerodial({
container: document.getElementById('exportExample')
});
pane.add(params, 'color');
pane.add(params, 'size', {min: 1, max: 100});
pane.add(params, 'speed', {min: 0.0, max: 1.0});

pane.on('change', function() {
showJson(pane.getJson());
});

showJson(pane.getJson());
})();

(function() {
var params = {
color: '#08f',
size: 20,
speed: 0.5
};
var pane = Aerodial({
container: document.getElementById('importExample')
});
pane.addButton('Import').on('click', function() {
var json = JSON.parse(document.getElementById('importArea').textContent);
pane.setJson(json);
});
pane.addSeparator();
pane.add(params, 'color');
pane.add(params, 'size', {min: 1, max: 100});
pane.add(params, 'speed', {min: 0.0, max: 1.0});
})();

(function() {
var params1 = {
speed: 0.3
};
var params2 = {
speed: 0.7
};
var pane = Aerodial({
container: document.getElementById('idExample')
});
pane.add(params1, 'speed', {
id: 'target1_speed',
min: 0.0,
max: 1.0
});
pane.add(params2, 'speed', {
id: 'target2_speed',
min: 0.0,
max: 1.0
});

pane.on('change', function() {
document.getElementById('idArea').textContent = prettifyJson(pane.getJson());
});
document.getElementById('idArea').textContent = prettifyJson(pane.getJson());
})();
{% endblock %}